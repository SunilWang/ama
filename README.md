# Ask me anything in 《狼叔爱Node》

本仓库会持续更新，具体回复，请查看链接

# 2017-02-24

[回复内容](https://wx.xiaomiquan.com/mweb/views/topicdetail/topicdetail.html?topic_id=825114512512&secret=nz1g98h4s9mjd46jzu0tbx7blebu4enq&from=singlemessage)

## 问题1

> 在一家创业公司实习，承担了比普通公司更多的职责和工作，但是我认为这种情况不应该持续下去。创业公司要向正规化的公司发展，必须要形成一个工程体系。产品不应该以需要跑业务为由而只留下一个只有概念的需求。现在技术团队已经完善了自己的技术体系。但是产品给出的需求依然只是一个概念性的东西。并且依然不做出改变。我学的是软件工程，我理解的工程是以团队为主题，每个人有自己的职责，工作流程十分清晰，输入输出十分明确，团队目标十分清楚，这样才能高效的运转，创业公司人少没办法，但是不应该在原地踏步，应该积极的向工程化团队的目标发展。在大公司工作的你们产品，设计，开发之间的关系是怎么样的？👀👀

## 问题2

> nodejs如果只做后端开发的话，该如何在这条路上走的更远更好？ 我本人不太喜欢搞前端开发，只想在后端发展。

## 问题3

> 狼叔，您好。后端我只用过express + mongoose，想深入了解node.js后端，有什么源码demo可以推荐吗？😊

## 问题4

> 狼叔你好，我之前跟着你的教程学的nodejs，受益匪浅。现在基本的语法都会了，也自己做了些留言板、博客之类的小网站。但是现在遇到了瓶颈，遇到大项目就不知从何下手。希望狼叔指点迷津～谢谢狼叔


# 2017-02-27

[回复内容](https://wx.xiaomiquan.com/mweb/views/topicdetail/topicdetail.html?topic_id=551225855554&secret=nz1g98h4s9mjd46jzu0tbx7blebu4enq)

## 问题1

> 狼叔您好。我是一名雷达工程师，想做一个类似flightradar24的网站。现在雷达数据输出接口有网口和串口。请问这样的网站前后端怎么设计，数据怎么接入和存储？谢谢啦

> 再稍微详细点，前端要啥，后端能给啥，大致的流程是啥，晚点统一回复

> 前端实现飞机位置在地图上的实时显示，后端能提供雷达数据接口（网口或串口），接口实时输出飞机的位置高度速度等信息。总体上想做成flightradar24这个网站的样子。但是由于我之前是学硬件的，只学了一点网站的基础javascript ，html，node。还请狼叔多多指教

## 问题2

我是做php开发，在工作过程中，一直都是做业务逻辑开发。对于加载速度、并发，不是很了解。想请教一下node中是否也需要了解并发问题？会因为node是单线程 异步模式，就不需要了吗？

## 问题3

狼叔，我想问下，业务订单超时未付款自动关闭，一般是如何实现的？

# 2017-03-02

[回复内容](https://wx.xiaomiquan.com/mweb/views/topicdetail/topicdetail.html?topic_id=228828225811&secret=nz1g98h4s9mjd46jzu0tbx7blebu4enq)

## 问题1

> 狼叔您好，本人刚毕业半年，有将近一年的node.js开发经验，最近准备去参加node.js面试的，我想问一下node.js面试中，面试官最喜欢问哪几类的问题，有哪一些"雷区"是不能踩的，请狼叔指明一条明路，不胜感激～～
晚点统一回复

## 问题2

> 狼叔，我在用idea 的debug模式时，报端口监听错误。代码里起了子进程，没让子进程监听端口。是不是idea的debug工具会让进程监听端口？

## 问题3
> 狼叔可否聊一下测试的前世今生。为什么代码总要包含测试的部分？最近在学习promise的知识，其中有一章专门讲使用mocha进行promise测试。感觉不太理解，您是否可以形象的说一说呢

# 2017-03-06

[详细回复](https://wx.xiaomiquan.com/mweb/views/topicdetail/topicdetail.html?topic_id=145425855182&secret=nz1g98h4s9mjd46jzu0tbx7blebu4enq)

## 问题1

> 桑大 问个问题  如果后台用python或者java专门提供数据  node如何去调用

## 问题2

> 狼叔，最近李笑来的线上八周全栈班要开课，但是以rubyonrails为主。您可以比较一下和node的区别吗？如果报这个班，对全栈学习有多大帮助呢？我在google trend看rubyonrails在走下坡
可以写，不过会打起来😂

## 问题3

> 继续请教狼叔关于flightradar24的问题，我现在通过wireshark可以读取雷达数据服务器输出的udp包雷达数据，并且在github找到了数据格式asterix parse的一个python的代码https://github.com/CroatiaControlLtd/asterix，麻烦狼叔帮忙看一下如何改用node实现，您给理个思路。还想请教狼叔读取文件的问题，我只会用fs模块读取文件，如何从网络读取或是从标准输入（比如电脑串口）读取，能可否推荐相关书籍或文章，不胜感激

## 问题4

> 每次看github的代码都觉得一头雾水，不知怎么下手，请教各位大神们，你们是怎么阅读github里面代码的呢


# 2017-03-09

[统一回复](https://wx.xiaomiquan.com/mweb/views/topicdetail/topicdetail.html?topic_id=458558452158&secret=nz1g98h4s9mjd46jzu0tbx7blebu4enq)


## 问题1

> 如下代码实现了一个使用mocha来检测是否返回了一个用户的测试用例const request = require('supertest')describe('GET /user/:id', function() {    it('returns a user', function() {    return request(app)      .get('/user')      .set('Accept', 'application/json')      .expect(200, {        name: 'John Math'      }, done) })})

上面写的测试用例，不知道意义何在。我觉得是，真正需要测试的大都是业务逻辑，比如游戏核心玩法算法这些，写个测试用例有很大的意义，可以验证算法是否正确。

## 问题2

> 请问狼叔，现在node项目的代码使用ES6标准写还是用以前的？

## 问题3

> 狼叔每天可否出几道思考题，这样能够指引大家慢慢覆盖node的知识点。之前的那一次就非常棒

## 问题4

> 狼叔，对于用node 写手游服务器端，你有什么看法？或者有没有接触过的人，用node 在写服务器端的？

## 问题5

> mongo不支持事务，狼叔有什么推荐的解决方案吗？

## 问题6

> 一直有个疑惑，可能没有太在意。 今天想问下狼叔。大家都在说node.js的事件驱动，异步IO，概念都能倒背入流了，却依然没有掌握到精髓所在。
我的疑问在图片里，请狼叔解答。

/**
 * 疑问：
 * 单机运行情况下
 * 
 * 1: 并发请求过来的时候， 比如说req1, req2 ,是否这两个请求的func3 是按什么顺序注册到事件队列中的？
 * 2: 是否会因为并发，导致redis数据混乱？ 我觉得应该会，io异步导致
 * 3: 所谓的单线程，是否就真的没有锁，同步的烦恼？
 */


# 2017-03-16

[统一回复](https://wx.xiaomiquan.com/mweb/views/topicdetail/topicdetail.html?topic_id=228154214151&secret=nz1g98h4s9mjd46jzu0tbx7blebu4enq)

## 问题0

我基础知识不行，之前有js基础，然后看了一下node就开始写项目，边做项目边查资料，只是能把功能实现，理论知识欠缺，如果想补一下该看什么呢@i5ting 。求狼叔点拨一二

## 问题1

狼叔，您好!我想请问应届生找node.js实习工作难吗?没有经验简历应该怎么写?希望您能提供点思路给新人，谢谢!

## 问题2

这几天去面试了一些nodejs职位，被问得最多同时也是最基本的问题就是：你平时写node有没有什么经验心得。。狼叔请原谅我这个刚毕业没多久的node菜鸟，对于这一块确实没有累积到什么经验，所以想问一下，狼叔你们在开发nodejs项目的时候，最常遇到什么问题，如何去解决的，谢谢～

## 问题3

请教大家，在使用formidable模块的时候，我发现如果在当前上传表单中并没有上传文件，那么在执行到form.parse()的时候会默认保存一个大小为0字节的空文件，请教该怎么避免这个问题？

## 问题4

狼叔，今天遇到一个问题，关于NodeJS能开辟多少个子进程的问题。具体场景：利用子进程来处理socket.io请求，想提高cpu的利用率，不知道开多少个子进程比较合适，目前是按照os.cpus().length来开辟的，但是不知是否能够重复利用cpu。最好的方法是重现真是的生产环境，然后根据cpu的使用情况来确定开辟的子进程数，但是这不现实。请狼叔指点一下，谢谢。

## 问题5

前段时间在V2看到TB的吐（招）槽（聘）贴，后来狼叔也在CNode整理了一番，但后期看到TB的严大回复“我们希望能招募到更多的应届生或工作一两年的后端新人”，当然，另一层意思是，3年左右的“老油条”第一成本不划算，第二我们的业务新人就搞得定，所以就不需要了；这让我有些困惑，最近由于公司这边的动荡才让我有了观望的想法，公司拖欠半月左右工资，从16年下半年开始已经有3次了，个人属于那种比较老实的那种，踏实干活、关注技术走向，不太感冒管理层的勾心斗角，但是感觉基本工资都不能保障，没有安全感；总结下：本人14年毕业就在这家公司，先后负责及时聊天、推送、微信服务号开发，到现在为止由于某些原因，想听下狼叔，关于“深度要扎实，适当的加点管理，尝试帮你的领导多分担活”这部分的详解。相信对于后端Nodejs走了3年左右的人来说是一个共性问题了。
Ps：本人专业是计科（嵌入式方向），但由于刚毕业发现走硬件道路没有软件机会多，所以就投身到软件开发的队伍中了，Linux系统玩的很溜，甚至做过linux系统的裁剪和移植，所以才选择走后端而非前端，16年一段时间曾经做过一些简单前端开发，也做过php重构，但还是喜欢Nodejs，个人理念是不同需求、场景需要不同技术、语言，各个语言都有其擅长的地方和不灵的地方，不排斥java和php，能够灵活切换思维如果有需要的话；

## 问题6

```
0 var request = require("request");
    1
    2 var url = "http://localhost:3000/testRedisLock";
    3
    4 for(let i = 0 ; i < 10; i++){
    5   requestServer(i);
    6 }
    7
    8 function requestServer(index){
    9   request.post({
   10     url:  url,
   11     form: {
   12       index:  index,
   13       time: Date.now()
   14     }
   15   }, function(err){
   16   });
   17 }


function testRedisLock(req,res) {
    //测试redis原子性的分布式锁
    console.log('time-start: ', req.body.time);
    var jackPotDiamond = 0;
    var autoFillTimes = 0;
    var fillDiamond = 10;

    var log = {
        index:  req.body.index,
        time:   req.body.time,
        step    :   0
    };

    async.waterfall([
        function (cb) {
            redisUtil.getRedisData(POT_KEY, function (err,data) {
                if(!err && !!data){
                    jackPotDiamond = parseInt(data);
                }
                cb(err);
            });
        },
        function (cb) {
            log.oldJackPotDiamond = jackPotDiamond;
            jackPotDiamond += 10;
            log.jackPotDiamond = jackPotDiamond;
            redisUtil.setRedisData(POT_KEY, fillDiamond, function (err) {
                if(!!err){
                    log.step = 1;
                }
                cb(err);
            });
        },
        function (cb) {
            redisUtil.getRedisData(AUTO_FILL_TIMES, function (err,data) {
                if(!err && !!data){
                    autoFillTimes = parseInt(data);
                }
                cb(err);
            });
        },
        function (cb) {
            log.oldAutoFillTimes = autoFillTimes;
            autoFillTimes += 1;
            log.autoFillTimes = autoFillTimes;
            redisUtil.setRedisData(AUTO_FILL_TIMES, autoFillTimes, function (err) {
                if(!!err){
                    log.step = 2;
                }
                cb(err);
            });
        },
        function (cb) {
            redisUtil.INCRBY(AUTO_FILL_DIAMOND, fillDiamond, function (err) {
                if(!!err){
                    log.step = 3;
                }
                cb(err);
            });
        }
    ],function (err) {
        if(!!err){
            log.error = err;
        }
        console.log('autoFillJackPot： ', req.body.time,log);
        return res.send({info : log});
    });

for 循环执行了100次， 然而结果确实
autoFillJackPot：  1489131722216 { index: '93',
 time: '1489131722216',
 step: 0,
 oldJackPotDiamond: 0,
 jackPotDiamond: 10,
 oldAutoFillTimes: 0,
    autoFillTimes: 1 
}
除了index是递增的，redis拿到的数据以及更新的数据 都跟第一次执行结果一致。

我的理解就是，当大量的并发请求到服务器的时候，redis是需要加锁的，否则，数据就会出现错误。
虽然redis单个操作是具有原子性的也只是对一个操作具有原子性，不是对请求处理过程具有原子性。
```

## 问题7

狼叔，为什么写测试用例的时候要一条一条的写，而不是 按照功能模块一块撸了。


## 如果想提问，请加入《狼叔爱Node》群，有问必答

> 互相尊重，坦诚，不说没用的

《狼叔爱Node》是我在小密圈上创建的私密沟通群

- 主要内容涵盖Node、全栈、开源三大部分
- 偶尔发点感想、备忘、笔记类的，会有不想公开的哦
- 方便沟通，可以直接提问，应急支援，解答疑问、点评
- 更有justjavac、fundon、老雷，nswbmw、alsotang等大神陪伴

会员策略

前100名99元/年，之后恢复正常价格199元/年

![Connect](connect.jpg)



